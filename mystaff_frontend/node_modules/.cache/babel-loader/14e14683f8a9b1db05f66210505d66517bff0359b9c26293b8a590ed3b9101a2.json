{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport AddModal from \"@/components/Modal/AddModal.vue\";\nimport EditModal from \"@/components/Modal/EditModal.vue\";\nimport { mapState, mapActions } from 'vuex';\nimport Swal from 'sweetalert2';\nimport AuthService from \"../../AuthService\";\nexport default {\n  name: 'App',\n  components: {\n    AddModal,\n    EditModal\n  },\n  data() {\n    return {\n      // fields: [\n      //   { key: 'id', label: 'ID' },\n      //   { key: 'title', label: 'Title' },\n      //   { key: 'description', label: 'Description' },\n      //   { key: 'due_date', label: 'Due Date' },\n      //   { key: 'status', label: 'Status' },\n      //   { key: 'actions', label: 'Actions' }\n      // ],\n      // statusOptions: [\n      //   { value: 1, text: 'Active' },\n      //   { value: 0, text: 'Expired' }\n      // ],\n      // showEditModal: false,\n      // editedItem: {}\n    };\n  },\n  computed: {\n    // ...mapState({\n    //   products: state => state.products\n    // }),\n    // productsWithStatus() {\n    //   return this.products.map(product => ({\n    //     ...product,\n    //     status: this.mapStatus(product.status)\n    //   }));\n    // },\n    // isAdmin() {\n    //   const user = AuthService.getUser();\n    //   return user && user.roles === 'admin';\n    // }\n  },\n  methods: {\n    // ...mapActions(['getProducts', 'updateProduct', 'logout']),\n    ...mapActions(['logout']),\n    showModal() {\n      this.$refs.addModal.showModal();\n    },\n    openEditModal(item) {\n      this.editedItem = {\n        ...item\n      };\n      this.showEditModal = true;\n    },\n    closeEditModal() {\n      this.showEditModal = false;\n    },\n    async updateEditedItem(updatedItem) {\n      try {\n        const response = await this.updateProduct(updatedItem);\n        const index = this.products.findIndex(p => p.id === response.id);\n        if (index !== -1) {\n          this.$store.commit('UPDATE_PRODUCT', response);\n        }\n        this.showEditModal = false;\n      } catch (error) {\n        console.error('Error updating product:', error);\n        Swal.fire({\n          title: 'Error!',\n          text: 'Failed to update product',\n          icon: 'error',\n          confirmButtonText: 'OK'\n        });\n      }\n    },\n    async deleteProduct(id) {\n      try {\n        console.log('Deleting product with id:', id);\n        await this.$store.dispatch('deleteProduct', id);\n        Swal.fire({\n          title: 'Success!',\n          text: 'Product successfully deleted',\n          icon: 'success',\n          confirmButtonText: 'OK'\n        });\n      } catch (error) {\n        console.error('Error deleting product:', error);\n      }\n    },\n    addProduct(newProduct) {\n      this.$store.commit('ADD_PRODUCT', newProduct);\n    },\n    mapStatus(status) {\n      return status === 1 ? 'active' : 'expired';\n    },\n    async logout() {\n      try {\n        await this.$store.dispatch('logout');\n        AuthService.removeToken();\n        AuthService.removeUser();\n        Swal.fire({\n          title: 'Logged Out',\n          text: 'You have been successfully logged out.',\n          icon: 'success',\n          confirmButtonText: 'OK'\n        }).then(() => {\n          this.$router.push('/login');\n        });\n      } catch (error) {\n        console.error('Error logging out:', error);\n        Swal.fire({\n          title: 'Error!',\n          text: 'Failed to logout',\n          icon: 'error',\n          confirmButtonText: 'OK'\n        });\n      }\n    }\n  },\n  created() {\n    // this.getProducts();\n  }\n};","map":{"version":3,"names":["AddModal","EditModal","mapState","mapActions","Swal","AuthService","name","components","data","computed","methods","showModal","$refs","addModal","openEditModal","item","editedItem","showEditModal","closeEditModal","updateEditedItem","updatedItem","response","updateProduct","index","products","findIndex","p","id","$store","commit","error","console","fire","title","text","icon","confirmButtonText","deleteProduct","log","dispatch","addProduct","newProduct","mapStatus","status","logout","removeToken","removeUser","then","$router","push","created"],"sources":["C:\\xampp\\htdocs\\assessment_test\\mystaff_frontend\\src\\components\\Main.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <b-container>\r\n      <b-row class=\"mb-3\">\r\n        <b-col>\r\n          <h1>Video List</h1>\r\n          <b-button size=\"md\" variant=\"success\" class=\"float-start\" @click=\"showModal\" :disabled=\"!isAdmin\">Add New Video</b-button>\r\n          <b-button size=\"md\" variant=\"danger\" class=\"float-end\" @click=\"logout\">Logout</b-button>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col>\r\n          <b-table striped hover :items=\"productsWithStatus\" :fields=\"fields\" :show-empty=\"productsWithStatus.length === 0\">\r\n            <template #cell(actions)=\"data\">\r\n              <b-button size=\"sm\" variant=\"primary\" @click=\"openEditModal(data.item)\" class=\"me-3\" :disabled=\"!isAdmin\">Edit</b-button>\r\n              <b-button size=\"sm\" variant=\"danger\" @click=\"deleteProduct(data.item.id)\" :disabled=\"!isAdmin\">Delete</b-button>\r\n            </template>\r\n            <template #empty>\r\n              <div class=\"text-center\">\r\n                Empty Data\r\n              </div>\r\n            </template>\r\n          </b-table>\r\n        </b-col>\r\n      </b-row>\r\n      <AddModal ref=\"addModal\" @add-product=\"addProduct\"/>\r\n      <EditModal\r\n          :editedItem=\"editedItem\"\r\n          :showEditModal=\"showEditModal\"\r\n          :statusOptions=\"statusOptions\"\r\n          @submit-edit=\"updateEditedItem\"\r\n          @cancel-edit=\"closeEditModal\"\r\n      />\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AddModal from \"@/components/Modal/AddModal.vue\";\r\nimport EditModal from \"@/components/Modal/EditModal.vue\";\r\nimport { mapState, mapActions } from 'vuex';\r\nimport Swal from 'sweetalert2';\r\nimport AuthService from \"../../AuthService\";\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {AddModal, EditModal },\r\n  data() {\r\n    return {\r\n      // fields: [\r\n      //   { key: 'id', label: 'ID' },\r\n      //   { key: 'title', label: 'Title' },\r\n      //   { key: 'description', label: 'Description' },\r\n      //   { key: 'due_date', label: 'Due Date' },\r\n      //   { key: 'status', label: 'Status' },\r\n      //   { key: 'actions', label: 'Actions' }\r\n      // ],\r\n      // statusOptions: [\r\n      //   { value: 1, text: 'Active' },\r\n      //   { value: 0, text: 'Expired' }\r\n      // ],\r\n      // showEditModal: false,\r\n      // editedItem: {}\r\n    }\r\n  },\r\n  computed: {\r\n    // ...mapState({\r\n    //   products: state => state.products\r\n    // }),\r\n    // productsWithStatus() {\r\n    //   return this.products.map(product => ({\r\n    //     ...product,\r\n    //     status: this.mapStatus(product.status)\r\n    //   }));\r\n    // },\r\n    // isAdmin() {\r\n    //   const user = AuthService.getUser();\r\n    //   return user && user.roles === 'admin';\r\n    // }\r\n  },\r\n  methods: {\r\n    // ...mapActions(['getProducts', 'updateProduct', 'logout']),\r\n    ...mapActions(['logout']),\r\n    showModal() {\r\n      this.$refs.addModal.showModal();\r\n    },\r\n    openEditModal(item) {\r\n      this.editedItem = {...item};\r\n      this.showEditModal = true;\r\n    },\r\n    closeEditModal() {\r\n      this.showEditModal = false;\r\n    },\r\n\r\n    async updateEditedItem(updatedItem) {\r\n      try {\r\n        const response = await this.updateProduct(updatedItem);\r\n        const index = this.products.findIndex(p => p.id === response.id);\r\n        if (index !== -1) {\r\n          this.$store.commit('UPDATE_PRODUCT', response);\r\n        }\r\n        this.showEditModal = false;\r\n      } catch (error) {\r\n        console.error('Error updating product:', error);\r\n        Swal.fire({\r\n          title: 'Error!',\r\n          text: 'Failed to update product',\r\n          icon: 'error',\r\n          confirmButtonText: 'OK'\r\n        });\r\n      }\r\n    },\r\n    async deleteProduct(id) {\r\n      try {\r\n        console.log('Deleting product with id:', id);\r\n        await this.$store.dispatch('deleteProduct', id);\r\n        Swal.fire({\r\n          title: 'Success!',\r\n          text: 'Product successfully deleted',\r\n          icon: 'success',\r\n          confirmButtonText: 'OK'\r\n        });\r\n      } catch (error) {\r\n        console.error('Error deleting product:', error);\r\n      }\r\n    },\r\n    addProduct(newProduct) {\r\n      this.$store.commit('ADD_PRODUCT', newProduct);\r\n    },\r\n    mapStatus(status) {\r\n      return status === 1 ? 'active' : 'expired';\r\n    },\r\n    async logout() {\r\n      try {\r\n        await this.$store.dispatch('logout');\r\n        AuthService.removeToken();\r\n        AuthService.removeUser();\r\n        Swal.fire({\r\n          title: 'Logged Out',\r\n          text: 'You have been successfully logged out.',\r\n          icon: 'success',\r\n          confirmButtonText: 'OK'\r\n        }).then(() => {\r\n          this.$router.push('/login');\r\n        });\r\n      } catch (error) {\r\n        console.error('Error logging out:', error);\r\n        Swal.fire({\r\n          title: 'Error!',\r\n          text: 'Failed to logout',\r\n          icon: 'error',\r\n          confirmButtonText: 'OK'\r\n        });\r\n      }\r\n    },\r\n  },\r\n  created() {\r\n    // this.getProducts();\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#app {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 60px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}