{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Product List\", -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"text-center\"\n}, \" Empty Data \", -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_b_button = _resolveComponent(\"b-button\");\n  const _component_b_col = _resolveComponent(\"b-col\");\n  const _component_b_row = _resolveComponent(\"b-row\");\n  const _component_b_table = _resolveComponent(\"b-table\");\n  const _component_b_progress = _resolveComponent(\"b-progress\");\n  const _component_AddModal = _resolveComponent(\"AddModal\");\n  const _component_EditModal = _resolveComponent(\"EditModal\");\n  const _component_b_container = _resolveComponent(\"b-container\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_b_container, null, {\n    default: _withCtx(() => [_createVNode(_component_b_row, {\n      class: \"mb-3\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_b_col, null, {\n        default: _withCtx(() => [_hoisted_2, _createVNode(_component_b_button, {\n          size: \"md\",\n          variant: \"success\",\n          class: \"float-start\",\n          onClick: $options.showModal,\n          disabled: !$options.isAdmin\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"Add New Product\")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\", \"disabled\"]), _createVNode(_component_b_button, {\n          size: \"md\",\n          variant: \"danger\",\n          class: \"float-end\",\n          onClick: _ctx.logout\n        }, {\n          default: _withCtx(() => [_createTextVNode(\"Logout\")]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_b_row, null, {\n      default: _withCtx(() => [_createVNode(_component_b_col, null, {\n        default: _withCtx(() => [_createVNode(_component_b_table, {\n          striped: \"\",\n          hover: \"\",\n          items: $options.productsWithStatus,\n          fields: $data.fields,\n          \"show-empty\": $options.productsWithStatus.length === 0\n        }, {\n          \"cell(actions)\": _withCtx(data => [_createVNode(_component_b_button, {\n            size: \"sm\",\n            variant: \"primary\",\n            onClick: $event => $options.openEditModal(data.item),\n            class: \"me-3\",\n            disabled: !$options.isAdmin\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"Edit\")]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\", \"disabled\"]), _createVNode(_component_b_button, {\n            size: \"sm\",\n            variant: \"danger\",\n            onClick: $event => $options.deleteProduct(data.item.id),\n            disabled: !$options.isAdmin\n          }, {\n            default: _withCtx(() => [_createTextVNode(\"Delete\")]),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\", \"disabled\"])]),\n          empty: _withCtx(() => [_hoisted_3]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"items\", \"fields\", \"show-empty\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), $data.uploadProgress > 0 ? (_openBlock(), _createBlock(_component_b_progress, {\n      key: 0,\n      value: $data.uploadProgress,\n      max: 100,\n      class: \"mb-3\"\n    }, null, 8 /* PROPS */, [\"value\"])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_AddModal, {\n      ref: \"addModal\",\n      onAddProduct: $options.addProduct\n    }, null, 8 /* PROPS */, [\"onAddProduct\"]), _createVNode(_component_EditModal, {\n      editedItem: $data.editedItem,\n      showEditModal: $data.showEditModal,\n      statusOptions: $data.statusOptions,\n      onSubmitEdit: $options.updateEditedItem,\n      onCancelEdit: $options.closeEditModal\n    }, null, 8 /* PROPS */, [\"editedItem\", \"showEditModal\", \"statusOptions\", \"onSubmitEdit\", \"onCancelEdit\"])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["id","_createElementVNode","class","_createElementBlock","_hoisted_1","_createVNode","_component_b_container","default","_withCtx","_component_b_row","_component_b_col","_hoisted_2","_component_b_button","size","variant","onClick","$options","showModal","disabled","isAdmin","_createTextVNode","_","_ctx","logout","_component_b_table","striped","hover","items","productsWithStatus","fields","$data","length","data","$event","openEditModal","item","deleteProduct","empty","_hoisted_3","uploadProgress","_createBlock","_component_b_progress","key","value","max","_createCommentVNode","_component_AddModal","ref","onAddProduct","addProduct","_component_EditModal","editedItem","showEditModal","statusOptions","onSubmitEdit","updateEditedItem","onCancelEdit","closeEditModal"],"sources":["C:\\xampp\\htdocs\\assessment_test\\mystaff_frontend\\src\\components\\Main.vue"],"sourcesContent":["<template>\r\n  <div id=\"app\">\r\n    <b-container>\r\n      <b-row class=\"mb-3\">\r\n        <b-col>\r\n          <h1>Product List</h1>\r\n          <b-button size=\"md\" variant=\"success\" class=\"float-start\" @click=\"showModal\" :disabled=\"!isAdmin\">Add New Product</b-button>\r\n          <b-button size=\"md\" variant=\"danger\" class=\"float-end\" @click=\"logout\">Logout</b-button>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row>\r\n        <b-col>\r\n          <b-table striped hover :items=\"productsWithStatus\" :fields=\"fields\" :show-empty=\"productsWithStatus.length === 0\">\r\n            <template #cell(actions)=\"data\">\r\n              <b-button size=\"sm\" variant=\"primary\" @click=\"openEditModal(data.item)\" class=\"me-3\" :disabled=\"!isAdmin\">Edit</b-button>\r\n              <b-button size=\"sm\" variant=\"danger\" @click=\"deleteProduct(data.item.id)\" :disabled=\"!isAdmin\">Delete</b-button>\r\n            </template>\r\n            <template #empty>\r\n              <div class=\"text-center\">\r\n                Empty Data\r\n              </div>\r\n            </template>\r\n          </b-table>\r\n        </b-col>\r\n      </b-row>\r\n      <b-progress :value=\"uploadProgress\" :max=\"100\" class=\"mb-3\" v-if=\"uploadProgress > 0\"></b-progress>\r\n      <AddModal ref=\"addModal\" @add-product=\"addProduct\"/>\r\n      <EditModal :editedItem=\"editedItem\" :showEditModal=\"showEditModal\" :statusOptions=\"statusOptions\" @submit-edit=\"updateEditedItem\" @cancel-edit=\"closeEditModal\"/>\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AddModal from \"@/components/Modal/AddModal.vue\";\r\nimport EditModal from \"@/components/Modal/EditModal.vue\";\r\nimport { mapState, mapActions } from 'vuex';\r\nimport Swal from 'sweetalert2';\r\nimport AuthService from \"../../AuthService\";\r\nimport axios from '../../axiosConfig';\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: { AddModal, EditModal },\r\n  data() {\r\n    return {\r\n      fields: [\r\n        { key: 'id', label: 'ID' },\r\n        { key: 'title', label: 'Title' },\r\n        { key: 'description', label: 'Description' },\r\n        { key: 'due_date', label: 'Due Date' },\r\n        { key: 'status', label: 'Status' },\r\n        { key: 'actions', label: 'Actions' }\r\n      ],\r\n      statusOptions: [\r\n        { value: 1, text: 'Active' },\r\n        { value: 0, text: 'Expired' }\r\n      ],\r\n      showEditModal: false,\r\n      editedItem: {},\r\n      uploadProgress: 0\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState({\r\n      products: state => state.products\r\n    }),\r\n    productsWithStatus() {\r\n      return this.products.map(product => ({\r\n        ...product,\r\n        status: this.mapStatus(product.status)\r\n      }));\r\n    },\r\n    isAdmin() {\r\n      const user = AuthService.getUser();\r\n      return user && user.roles === 'admin';\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions(['getProducts', 'updateProduct', 'logout']),\r\n    showModal() {\r\n      this.$refs.addModal.showModal();\r\n    },\r\n    openEditModal(item) {\r\n      this.editedItem = { ...item };\r\n      this.showEditModal = true;\r\n    },\r\n    closeEditModal() {\r\n      this.showEditModal = false;\r\n    },\r\n    updateEditedItem() {\r\n      this.updateProduct(this.editedItem);\r\n      this.closeEditModal();\r\n    },\r\n    async deleteProduct(productId) {\r\n      try {\r\n        await this.$store.dispatch('deleteProduct', productId);\r\n        Swal.fire('Deleted!', 'Your file has been deleted.', 'success');\r\n      } catch (error) {\r\n        Swal.fire('Error!', 'There was a problem deleting your file.', 'error');\r\n      }\r\n    },\r\n    async addProduct(newProduct) {\r\n      try {\r\n        const formData = new FormData();\r\n        formData.append('title', newProduct.title);\r\n        formData.append('description', newProduct.description);\r\n        formData.append('due_date', newProduct.due_date);\r\n        formData.append('status', newProduct.status);\r\n        formData.append('video', newProduct.videoFile);\r\n\r\n        const response = await axios.post('/api/videos', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          },\r\n          onUploadProgress: progressEvent => {\r\n            const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n            this.uploadProgress = percentCompleted;\r\n          }\r\n        });\r\n\r\n        Swal.fire({\r\n          icon: 'success',\r\n          title: 'Success',\r\n          text: response.data.message,\r\n          confirmButtonText: 'OK',\r\n        });\r\n        this.getProducts();\r\n        this.uploadProgress = 0;\r\n      } catch (error) {\r\n        Swal.fire({\r\n          icon: 'error',\r\n          title: 'Error',\r\n          text: error.response?.data?.message || 'An error occurred'\r\n        });\r\n      }\r\n    },\r\n    mapStatus(status) {\r\n      return status === 1 ? 'Active' : 'Expired';\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getProducts();\r\n  }\r\n}\r\n</script>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}